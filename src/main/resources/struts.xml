<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
	"http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>

  <constant name="struts.excludedClasses"
            value="
                java.lang.Object,
                java.lang.Runtime,
                java.lang.System,
                java.lang.Class,
                java.lang.ClassLoader,
                ognl.OgnlContext,
                ognl.MemberAccess,
                ognl.ClassResolver,
                ognl.TypeConverter,
                com.opensymphony.xwork2.ActionContext" />

  <constant name="struts.enable.DynamicMethodInvocation" value="false"/>
  <constant name="struts.devMode" value="true"/>
  <constant name="struts.ui.theme" value="bootstrap"/>
  <constant name="struts.action.extension" value=""/>
  <constant name="struts.action.excludePattern" value="/_ah/*,/favicon\.ico"/>
  <constant name="struts.convention.action.packages" value="me.rbw.web.actions"/>
  <constant name="struts.convention.default.parent.package" value="rbwDefault"/>

  <bean type="org.apache.struts2.convention.ResultMapBuilder" name="tiles-convention" class="me.rbw.web.TilesResultMapBuilder"/>
  <constant name="struts.convention.resultMapBuilder" value="tiles-convention"/>

  <bean type="com.opensymphony.xwork2.UnknownHandler" name="tiles-convention" class="me.rbw.web.TilesUnknownHandler"/>

  <package name="rbwDefault" extends="struts-default">

    <result-types>
      <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" default="true" />
    </result-types>

    <interceptors>

      <interceptor name="login" class="me.rbw.web.interceptors.LoginInterceptor"/>
      <interceptor name="user" class="me.rbw.web.interceptors.UserInterceptor"/>
      <interceptor name="garage" class="me.rbw.web.interceptors.GarageInterceptor"/>

      <interceptor-stack name="rbwDefaultDev">
        <interceptor-ref name="exception"/>
        <interceptor-ref name="login"/>
        <interceptor-ref name="alias"/>
        <interceptor-ref name="servletConfig"/>
        <interceptor-ref name="i18n"/>
        <interceptor-ref name="prepare"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="conversionError"/>
        <interceptor-ref name="validation">
          <param name="excludeMethods">input,back,cancel,browse</param>
        </interceptor-ref>
        <interceptor-ref name="workflow">
          <param name="excludeMethods">input,back,cancel,browse</param>
        </interceptor-ref>
        <interceptor-ref name="user"/>
        <interceptor-ref name="garage"/>
        <interceptor-ref name="debugging"/>
      </interceptor-stack>
    </interceptors>

    <default-interceptor-ref name="rbwDefaultDev"/>

    <default-action-ref name="index"/>

    <global-results>
      <result name="login" type="redirectAction">
        <param name="actionName">login</param>
        <param name="namespace">/</param>
      </result>
      <result name="home" type="redirectAction">
        <param name="actionName">home</param>
        <param name="namespace">/</param>
      </result>
    </global-results>

  </package>

  <unknown-handler-stack>
    <unknown-handler-ref name="tiles-convention"/>
  </unknown-handler-stack>

</struts>
